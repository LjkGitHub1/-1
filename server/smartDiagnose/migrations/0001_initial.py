# Generated by Django 5.2.4 on 2025-10-26 11:10

import common.core.models
import common.fields.image
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ("system", "0003_userloginlog_channel_name_and_more"),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name="EmotionRecognition",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_time",
                    models.DateTimeField(
                        auto_now_add=True, null=True, verbose_name="Created time"
                    ),
                ),
                (
                    "updated_time",
                    models.DateTimeField(
                        auto_now=True, null=True, verbose_name="Updated time"
                    ),
                ),
                (
                    "description",
                    models.CharField(
                        blank=True,
                        max_length=256,
                        null=True,
                        verbose_name="Description",
                    ),
                ),
                (
                    "recog_name",
                    models.CharField(
                        help_text="情绪识别模型名称",
                        max_length=64,
                        verbose_name="识别模型名称",
                    ),
                ),
                (
                    "api_endpoint",
                    models.URLField(
                        help_text="情绪识别接口URL", verbose_name="API接口地址"
                    ),
                ),
                (
                    "api_key",
                    models.CharField(
                        help_text="接口访问密钥",
                        max_length=128,
                        verbose_name="调用密钥",
                    ),
                ),
                (
                    "supported_type",
                    models.SmallIntegerField(
                        choices=[(1, "文本识别"), (2, "语音识别"), (3, "图像识别")],
                        default=1,
                        verbose_name="支持识别类型",
                    ),
                ),
                (
                    "is_active",
                    models.BooleanField(default=True, verbose_name="是否启用"),
                ),
                (
                    "test_image",
                    common.fields.image.ProcessedImageField(
                        blank=True,
                        help_text="上传测试用情绪图像",
                        null=True,
                        upload_to=common.core.models.upload_directory_path,
                        verbose_name="测试图像",
                    ),
                ),
                (
                    "creator",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="creator_query",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Creator",
                    ),
                ),
                (
                    "dept_belong",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="dept_belong_query",
                        to="system.deptinfo",
                        verbose_name="Data ownership department",
                    ),
                ),
                (
                    "modifier",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="modifier_query",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Modifier",
                    ),
                ),
            ],
            options={
                "verbose_name": "情绪识别配置",
                "verbose_name_plural": "情绪识别配置",
            },
        ),
        migrations.CreateModel(
            name="KnowledgeBase",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_time",
                    models.DateTimeField(
                        auto_now_add=True, null=True, verbose_name="Created time"
                    ),
                ),
                (
                    "updated_time",
                    models.DateTimeField(
                        auto_now=True, null=True, verbose_name="Updated time"
                    ),
                ),
                (
                    "kb_name",
                    models.CharField(
                        help_text="知识库分类名称",
                        max_length=64,
                        verbose_name="知识库名称",
                    ),
                ),
                (
                    "description",
                    models.TextField(
                        blank=True,
                        help_text="简述知识库用途与内容",
                        null=True,
                        verbose_name="知识库描述",
                    ),
                ),
                (
                    "doc_count",
                    models.IntegerField(
                        default=0,
                        help_text="自动统计所属文档总数",
                        verbose_name="文档数量",
                    ),
                ),
                (
                    "creator",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="creator_query",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Creator",
                    ),
                ),
                (
                    "dept_belong",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="dept_belong_query",
                        to="system.deptinfo",
                        verbose_name="Data ownership department",
                    ),
                ),
                (
                    "modifier",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="modifier_query",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Modifier",
                    ),
                ),
            ],
            options={
                "verbose_name": "知识库管理",
                "verbose_name_plural": "知识库管理",
            },
        ),
        migrations.CreateModel(
            name="KnowledgeDoc",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_time",
                    models.DateTimeField(
                        auto_now_add=True, null=True, verbose_name="Created time"
                    ),
                ),
                (
                    "updated_time",
                    models.DateTimeField(
                        auto_now=True, null=True, verbose_name="Updated time"
                    ),
                ),
                (
                    "description",
                    models.CharField(
                        blank=True,
                        max_length=256,
                        null=True,
                        verbose_name="Description",
                    ),
                ),
                (
                    "doc_title",
                    models.CharField(
                        help_text="文档核心主题",
                        max_length=128,
                        verbose_name="文档标题",
                    ),
                ),
                (
                    "content",
                    models.TextField(
                        help_text="知识库详细内容", verbose_name="文档内容"
                    ),
                ),
                (
                    "tags",
                    models.CharField(
                        blank=True,
                        help_text="逗号分隔，如'焦虑症,心理疏导'",
                        max_length=256,
                        null=True,
                        verbose_name="标签",
                    ),
                ),
                (
                    "hit_count",
                    models.IntegerField(
                        default=0, help_text="被问答调用的次数", verbose_name="命中次数"
                    ),
                ),
                (
                    "attach_file",
                    models.FileField(
                        blank=True,
                        help_text="上传补充资料",
                        null=True,
                        upload_to=common.core.models.upload_directory_path,
                        verbose_name="文档附件",
                    ),
                ),
                (
                    "creator",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="creator_query",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Creator",
                    ),
                ),
                (
                    "dept_belong",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="dept_belong_query",
                        to="system.deptinfo",
                        verbose_name="Data ownership department",
                    ),
                ),
                (
                    "kb",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="kb_docs",
                        to="smartDiagnose.knowledgebase",
                        verbose_name="所属知识库",
                    ),
                ),
                (
                    "modifier",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="modifier_query",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Modifier",
                    ),
                ),
            ],
            options={
                "verbose_name": "知识库文档",
                "verbose_name_plural": "知识库文档",
            },
        ),
        migrations.CreateModel(
            name="ChatRecord",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_time",
                    models.DateTimeField(
                        auto_now_add=True, null=True, verbose_name="Created time"
                    ),
                ),
                (
                    "updated_time",
                    models.DateTimeField(
                        auto_now=True, null=True, verbose_name="Updated time"
                    ),
                ),
                (
                    "description",
                    models.CharField(
                        blank=True,
                        max_length=256,
                        null=True,
                        verbose_name="Description",
                    ),
                ),
                (
                    "session_id",
                    models.CharField(
                        help_text="标识一次完整对话",
                        max_length=64,
                        verbose_name="会话ID",
                    ),
                ),
                (
                    "question",
                    models.TextField(
                        help_text="用户输入的问题内容", verbose_name="用户问题"
                    ),
                ),
                (
                    "answer",
                    models.TextField(
                        blank=True,
                        help_text="大模型返回的回答",
                        null=True,
                        verbose_name="模型回答",
                    ),
                ),
                (
                    "emotion_result",
                    models.CharField(
                        blank=True,
                        help_text="如'焦虑(0.85)'",
                        max_length=64,
                        null=True,
                        verbose_name="情绪识别结果",
                    ),
                ),
                (
                    "creator",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="creator_query",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Creator",
                    ),
                ),
                (
                    "dept_belong",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="dept_belong_query",
                        to="system.deptinfo",
                        verbose_name="Data ownership department",
                    ),
                ),
                (
                    "modifier",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="modifier_query",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Modifier",
                    ),
                ),
                (
                    "user",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="chat_user",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="用户",
                    ),
                ),
                (
                    "kb_ref",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="chat_refs",
                        to="smartDiagnose.knowledgedoc",
                        verbose_name="关联知识库文档",
                    ),
                ),
            ],
            options={
                "verbose_name": "心理问答记录",
                "verbose_name_plural": "心理问答记录",
            },
        ),
        migrations.CreateModel(
            name="ModelConfig",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_time",
                    models.DateTimeField(
                        auto_now_add=True, null=True, verbose_name="Created time"
                    ),
                ),
                (
                    "updated_time",
                    models.DateTimeField(
                        auto_now=True, null=True, verbose_name="Updated time"
                    ),
                ),
                (
                    "description",
                    models.CharField(
                        blank=True,
                        max_length=256,
                        null=True,
                        verbose_name="Description",
                    ),
                ),
                (
                    "model_name",
                    models.CharField(
                        help_text="填写大模型官方名称",
                        max_length=64,
                        verbose_name="模型名称",
                    ),
                ),
                (
                    "api_endpoint",
                    models.URLField(
                        help_text="大模型调用接口URL", verbose_name="API接口地址"
                    ),
                ),
                (
                    "api_key",
                    models.CharField(
                        help_text="接口访问密钥，加密存储",
                        max_length=128,
                        verbose_name="调用密钥",
                    ),
                ),
                (
                    "params",
                    models.JSONField(
                        default=dict,
                        help_text="如温度、最大token数，JSON格式",
                        verbose_name="调用参数",
                    ),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        default=True,
                        help_text="启用后可用于业务调用",
                        verbose_name="是否启用",
                    ),
                ),
                (
                    "creator",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="creator_query",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Creator",
                    ),
                ),
                (
                    "dept_belong",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="dept_belong_query",
                        to="system.deptinfo",
                        verbose_name="Data ownership department",
                    ),
                ),
                (
                    "modifier",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="modifier_query",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Modifier",
                    ),
                ),
            ],
            options={
                "verbose_name": "模型配置",
                "verbose_name_plural": "模型配置",
            },
        ),
        migrations.CreateModel(
            name="PaintingTherapy",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_time",
                    models.DateTimeField(
                        auto_now_add=True, null=True, verbose_name="Created time"
                    ),
                ),
                (
                    "updated_time",
                    models.DateTimeField(
                        auto_now=True, null=True, verbose_name="Updated time"
                    ),
                ),
                (
                    "description",
                    models.CharField(
                        blank=True,
                        max_length=256,
                        null=True,
                        verbose_name="Description",
                    ),
                ),
                (
                    "therapy_name",
                    models.CharField(
                        help_text="绘画治疗模型名称",
                        max_length=64,
                        verbose_name="治疗模型名称",
                    ),
                ),
                (
                    "api_endpoint",
                    models.URLField(
                        help_text="绘画生成接口URL", verbose_name="API接口地址"
                    ),
                ),
                (
                    "api_key",
                    models.CharField(
                        help_text="接口访问密钥",
                        max_length=128,
                        verbose_name="调用密钥",
                    ),
                ),
                (
                    "style_options",
                    models.JSONField(
                        default=list,
                        help_text="JSON格式，如['治愈系','抽象派']",
                        verbose_name="绘画风格选项",
                    ),
                ),
                (
                    "is_active",
                    models.BooleanField(default=True, verbose_name="是否启用"),
                ),
                (
                    "style_preview",
                    models.ImageField(
                        blank=True,
                        help_text="上传风格示例图",
                        null=True,
                        upload_to=common.core.models.upload_directory_path,
                        verbose_name="风格预览图",
                    ),
                ),
                (
                    "creator",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="creator_query",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Creator",
                    ),
                ),
                (
                    "dept_belong",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="dept_belong_query",
                        to="system.deptinfo",
                        verbose_name="Data ownership department",
                    ),
                ),
                (
                    "modifier",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        related_query_name="modifier_query",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="Modifier",
                    ),
                ),
            ],
            options={
                "verbose_name": "绘画治疗配置",
                "verbose_name_plural": "绘画治疗配置",
            },
        ),
    ]
